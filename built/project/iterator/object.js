var baseDep=typeof define!="function"?"./base":"iterator.base";define([baseDep,"lodash"],function(e,t){var n=e.extend({initialize:function(n,r){r=r||{},e.prototype.initialize.apply(this,arguments),this.order=r.order||t.keys(n)},keyAt:function(t){return this.order[t]},at:function(e){var t=this.keyAt(e),n=this.data[t];return this.evaluate(n,t)},length:function(){return this.order.length},nextKey:function(){return this.keyAt(this.currentIndex+1)},map:function(e){var n={};return t.each(this.order,function(t,r){n[t]=e(this.data[t],t,r)}.bind(this)),this.constructor(n)}});return n.proto("constructor",n),n});