var baseDep=typeof define!="function"?"./base":"iterator.base";define([baseDep,"lodash"],function(e,t){var n=e.extend({initialize:function(r,i){i=i||{},e.prototype.initialize.apply(this,arguments),this.order=i.order||t.keys(r)},keyAt:function(t){return this.order[t]},at:function(t){var n=this.keyAt(t),r=this.data[n];return this.evaluate(r,n)},length:function(){return this.order.length},nextKey:function(){return this.keyAt(this.currentIndex+1)},currentKey:function(){return this.keyAt(this.currentIndex)},previousKey:function(){return this.keyAt(this.currentIndex-1)},map:function(e){var n={};return t.each(this.order,function(t,r){n[t]=e(this.data[t],t,r)}.bind(this)),this.constructor(n)}});return n.proto("constructor",n),n});